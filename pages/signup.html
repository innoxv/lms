<!DOCTYPE html> <!-- Declares the document type and version of HTML (HTML5) -->
<html lang="en"> <!-- Root element of the HTML document; 'lang="en"' specifies the language as English -->
<head>
    <meta charset="UTF-8"> <!-- Sets the character encoding for the document to UTF-8, supporting most characters from all languages -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 
        The viewport meta tag controls the layout on mobile browsers.
        width=device-width: sets the width of the page to follow the screen-width of the device.
        initial-scale=1.0: sets the initial zoom level when the page is first loaded by the browser.
    -->
    <title>Sign Up</title> <!-- Sets the title of the page, shown in the browser tab -->
    <link rel="stylesheet" href="../css/style.css">
    <!-- 
        The link tag links an external CSS stylesheet to the HTML document.
        rel="stylesheet": specifies the relationship as a stylesheet.
        href="../css/style.css": path to the CSS file that styles the page.
    -->
</head>
<body class="centered-page">
    <div class="container">
        <label class="header-label"><a href="./landingpage.html">LMS <img src="../icons/home.svg" alt="" srcset=""></a></label>
        <div class="content">
            <form action="signup.php" id="signupForm" method="post" onsubmit="return validateForm()">
                <table class="table">
                    <!-- Error tag for displaying validation errors -->
                    <div id="error" style="color: tomato; font-weight:700;"></div>
                    <tr>
                        <td><label>Register as?</label></td>
                        <td>
                            <select name="role" id="role" class="select">
                                <option value="--select option--" selected>--select option--</option>
                                <option value="Customer">Customer</option>
                                <option value="Lender">Lender</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td><label for="firstName">First Name</label></td>
                        <td><input type="text" id="firstName" name="firstName"></td>
                        <td><label for="secondName">Second Name</label></td>
                        <td><input type="text" id="secondName" name="secondName"></td>
                    </tr>
                    <tr>
                        <td><label for="email">Email</label></td>
                        <td><input type="text" id="email" name="email"></td>
                        <td><label for="phone">Phone</label></td>
                        <td><input type="text" id="phone" name="phone"></td>
                    </tr>
                    <tr>
                        <td><label for="address">Address</label></td>
                        <td><input type="text" id="address" name="address"></td>
                        <!-- Fields only relevant to customers are in class hidden -->
                        <td id="customerFields" class="hidden"><label for="dob">Date of Birth</label></td>
                        <td id="customerFields" class="hidden"><input type="text"  placeholder="dd-mm-yyyy" id="dob" name="dob"></td>
                    </tr>
                    <tr id="customerFields" class="hidden">
                        <td><label for="nationalId">National ID</label></td>
                        <td><input type="text" id="nationalId" name="nationalId"></td>
                        <td><label for="accountNumber">Account No.</label></td>
                        <td><input type="text" id="accountNumber" name="accountNumber"></td>
                    </tr>
                    <tr>
                        <td><label for="password">Password</label></td>
                        <td><input type="password" id="password" name="password"></td>
                    </tr>
                    <tr>
                        <td><label for="confPassword">Confirm <br> Password</label></td>
                        <td><input type="password" id="confPassword" name="confPassword"></td>
                    </tr>
                    <tr class="signup-submit-action">
                        <td></td>
                        <td style="text-align:center;"><button style="width: 90%; " type="submit" name="submit">REGISTER</button></td>
                    </tr>
                </table>
                <div class="signup-alt">already have an account?<button type="button"><a href="./signin.html">LOG IN</a></button></div>

            </form>
        </div>
    </div>

    <!-- External JavaScript for validation -->
    <script src="../js/validinput.js"></script>

<script>
// USER ROLE FORM FIELD VISIBILITY SECTION
// Manages the visibility of customer-specific fields based on the selected user role
// Gets the dropdown element for selecting the user role, identified by ID 'role'
const roleDropdown = document.getElementById('role');
// Selects all elements with ID 'customerFields' (fields specific to the Customer role)
const customerFields = document.querySelectorAll('#customerFields');

// Adds a change event listener to the role dropdown to handle role selection changes
roleDropdown.addEventListener('change', function() {
    // Checks if the selected value in the dropdown is 'Lender'
    if (roleDropdown.value === 'Lender') {
        // Loops through all customer-specific fields
        customerFields.forEach(field => {
            // Adds the 'hidden' CSS class to hide each field
            field.classList.add('hidden');
        });
    } else {
        // If the selected role is not 'Lender' (e.g., 'Customer' or other roles)
        customerFields.forEach(field => {
            // Removes the 'hidden' CSS class to show each field
            field.classList.remove('hidden');
        });
    }
});

// Initializes the visibility of customer fields when the page loads
window.onload = function() {
    // Checks if the role dropdownâ€™s value is the default placeholder '--select option--'
    if (roleDropdown.value === '--select option--') {
        // Loops through all customer-specific fields
        customerFields.forEach(field => {
            // Removes the 'hidden' CSS class to show the fields by default
            field.classList.remove('hidden');
        });
    }
};
</script>
</body>
</html>